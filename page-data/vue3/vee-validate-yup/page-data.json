{"componentChunkName":"component---src-templates-blog-template-js","path":"/vue3/vee-validate-yup/","result":{"data":{"cur":{"id":"5ba59386-97e6-5b10-b30a-ea74a0698285","html":"<p>폼 유효성 검사를 일일히 작성하기에는 복잡하기 때문에 라이브러리를 이용하는 편입니다. 기존 프로젝트에서는 angularjs를 이용했기 때문에, angularjs의 validation을 이용하였습니다. 하지만 vue애선 달리 제공하는 validation이 없기 때문에, 인기가 있는 vee-validate 라이브러리에 관심을 갖게 되었습니다.</p>\n<p><strong>Vee-validate는</strong> <strong>Yup</strong>과의 조합도 좋습니다. 리액트에서도 <strong>Formik + Yup</strong> 조합으로 많이 씁니다. 우리는 Vue니까 Formik가 아닌 Vee-validate를 사용해봅시다.</p>\n<h2 id=\"vee-validate--yup\" style=\"position:relative;\"><a href=\"#vee-validate--yup\" aria-label=\"vee validate  yup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>V<strong>ee-validate +</strong> <strong>Yup</strong></h2>\n<p>게다가 이 두개의 조합을 vee-validate 공식 사이트에서 추천하는 것으로 보여, 이 둘을 조합해서 사용하겠습니다. Vee validate 홈페이지에서 <a href=\"https://vee-validate.logaretm.com/v4/tutorials/best-practices\">Best Practices</a>를 Yup을 사용해서 보여주고 있네요.</p>\n<p>공식사이트에선 Yup 라이브러리에서 string, object를 가져와서 유효성을 체크하고 있습니다.\nVee-validate 단독으로도 유효성 검사를 수행할수 있으나, length가 얼마나 되는지, strig인지 아닌지 등에 대한 유효성 체크 로직을 작성해주어야 하는데 반해, yup을 이용하면 간편하게 작성할수 있습니다.</p>\n<p>예를들어 이메일 유효성 체크를 한다고 합시다. 그러면 Vee-validate에서 다음과 같이 작성해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> validations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">email</span><span class=\"token operator\">:</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token string\">'This field is required'</span>\n\n        <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^(([^&lt;>()[\\]\\\\.,;:\\s@\"]+(\\.[^&lt;>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$</span><span class=\"token regex-delimiter\">/</span></span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'Please enter a valid email address'</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>하지만 Yup을 이용하면 간단합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> validationSchema <span class=\"token operator\">=</span> <span class=\"token function\">object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token operator\">...</span>\n      <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">email</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>대부분 우리가 사용하는 유효성에 대한 함수를 yup에서 제공하고 있습니다. 따라서, 두 라이브러리 조합이 꽤 좋은 선택으로 보이기 때문에 두 조합을 추천합니다. 다음에는 vee-validation에 대해 더 자세히 소개해보도록하겠습니다.</p>","excerpt":"폼 유효성 검사를 일일히 작성하기에는 복잡하기 때문에 라이브러리를 이용하는 편입니다. 기존 프로젝트에서는 angularjs를 이용했기 때문에, angularjs의 validation을 이용하였습니다. 하지만 vue애선 달리 제공하는 validation이 없기 때문에, 인기가 있는 vee-validate 라이브러리에 관심을 갖게 되었습니다. Vee-validate는 Yup과의 조합도 좋습니다. 리액트에서도 Formik + Yup 조합으로 많이 씁니다. 우리는 Vue니까 Formik가 아닌 Vee-validate를 사용해봅시다. Vee-validate + Yup 게다가 이 두개의 조합을 vee-validate 공식 사이트…","frontmatter":{"date":"September 26, 2021","title":"Vee-validation + Yup 조합 사용하기","categories":"vue3","author":"찐코딩","emoji":"✒️"},"fields":{"slug":"/vue3/vee-validate-yup/"}},"next":{"id":"80d8cd1a-0c64-547f-bf91-649902d56284","html":"<p>Intersection Observer API는 웹 API중 하나로 한국말로 해석하자면 교차 관찰자 정도로 해석할수 있을거 같습니다. 크롬 51버전부터 사용할 수 있고, 많은 브라우저에서 지원되지만 안타깝게도 우리의 Internet Explorer는 역시나 지원하지 않습니다.</p>\n<p>지원하는 브라우저는 다음 그림과 같습니다. IE는 지원이 아예안되고, 몇몇 사용자가 많지 않는 브라우저들에서 지원하지 않는걸로 보이네요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVQY0w3M209BAQCAcf9fT0ZtTU/13lbRg4desmaz6WJrippLzRaLNQmFQ0TkHI5LQ7kcQmm2/oIvD99+b59qNpIZiwJf5QSTzyJKNsp4IDLORejVMgxaefqNNB05SVdeWM/yIadoluP0miW6jQLtapJONU2/nkf1N+8TC1rwG9WIFgOXJi2KEMJnXkUKnDBrlfgZSsyVCvNehV+lvlDkW5GRPVbaEQ/TYY1hV2Q6qKOaXJ9yfLjOik3NrlmLxq7BaF5mzalj42CJVMDK+72LsM1A3GviRQqSFYO0KiH2HTrsd3u0pShDIYCSC6EaJ26QYhecCUfo/dvofZvsBLYIPju4LbmpPLmoPS6GaQcPGSfxVy/RReXcOcmCm/Cbj6LgZhR2MYhf8Q+Sx/u/uGvwrgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"caniuse\"\n        title=\"caniuse\"\n        src=\"/static/ac952397a3c594738168e23d6a9669f8/37523/caniuse-intersectionobserver.png\"\n        srcset=\"/static/ac952397a3c594738168e23d6a9669f8/e9ff0/caniuse-intersectionobserver.png 180w,\n/static/ac952397a3c594738168e23d6a9669f8/f21e7/caniuse-intersectionobserver.png 360w,\n/static/ac952397a3c594738168e23d6a9669f8/37523/caniuse-intersectionobserver.png 720w,\n/static/ac952397a3c594738168e23d6a9669f8/302a4/caniuse-intersectionobserver.png 1080w,\n/static/ac952397a3c594738168e23d6a9669f8/7af19/caniuse-intersectionobserver.png 1359w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"useimagelazy-함수-활용\" style=\"position:relative;\"><a href=\"#useimagelazy-%ED%95%A8%EC%88%98-%ED%99%9C%EC%9A%A9\" aria-label=\"useimagelazy 함수 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useImageLazy 함수 활용</h2>\n<p><strong>하지만</strong>, 지원하지 않는 브라우저라고 하더라도, 에러가 나지 않고 이미지가 잘 노출될수 있도록 아래 useImageLazy 함수에선 신경써서 잘 구현해놓았습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// useImageLazy</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>selector<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> observeOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> IntersectionObserverInit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getImage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>el<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// - 1</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>el <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HTMLImageElement</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      el<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>src\n      el<span class=\"token punctuation\">.</span><span class=\"token function\">removeAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-src'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>srcset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      el<span class=\"token punctuation\">.</span>srcset <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>srcset\n      el<span class=\"token punctuation\">.</span><span class=\"token function\">removeAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-srcset'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> io <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>entries <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// - 2</span>\n    entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>entry <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>isIntersecting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getImage</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>target <span class=\"token keyword\">as</span> HTMLElement<span class=\"token punctuation\">)</span>\n        io<span class=\"token punctuation\">.</span><span class=\"token function\">unobserve</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span> <span class=\"token comment\">// - 4</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> observeOptions<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> targetList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> NodeListOf<span class=\"token operator\">&lt;</span>HTMLElement<span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// - 3</span>\n    targetList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>el<span class=\"token operator\">:</span>HTMLElement<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'IntersectionObserverEntry'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span> io<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">else</span> <span class=\"token function\">getImage</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> io <span class=\"token comment\">// - 5</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"1-getimage\" style=\"position:relative;\"><a href=\"#1-getimage\" aria-label=\"1 getimage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. getImage</h3>\n<p>먼저,  getImage함수는 data-src에 있는 값을 src와 srcset에 대입해주고, data 어트리뷰트는 삭제해주는 함수입니다. 이 함수를 활용하여, 나중에 이미지 태그의 가시성이 확인될때 동적으로 이미지를 로드해줄겁니다.</p>\n<h3 id=\"2-intersectionobserver-인스턴스-생성\" style=\"position:relative;\"><a href=\"#2-intersectionobserver-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"2 intersectionobserver 인스턴스 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. IntersectionObserver 인스턴스 생성</h3>\n<p>IntersectionObserver를 생성해주고, 가시성이 확인될때, 즉 요소가 isIntersecting 될때, getImage를 호출할수 있도록합니다. 그리고, IntersectionObserver의 root나 margin등을 설정할수 있는 값을 연결해줍니다. 이 값은 useImageLazy의 파라미터입니다.</p>\n<h3 id=\"3-element-관찰-시작\" style=\"position:relative;\"><a href=\"#3-element-%EA%B4%80%EC%B0%B0-%EC%8B%9C%EC%9E%91\" aria-label=\"3 element 관찰 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. element 관찰 시작</h3>\n<p>useImageLazy의 파라미터, 문자열 값인 selector를 활용하여 querySelectorAll을 해줍니다. 그리고 이 리스트를 순회하면서 io 즉, IntersectionObserver의 인스턴스의 관찰대상으로 등록해줍니다.</p>\n<p>여기서 <code class=\"language-text\">IntersectionObserverEntry in window</code> 로 분기하는 부분이 있습니다. 이는 IntersectionObserver를 지원하는 브라우저에서는 요소를 observe해서 동적으로 이미지를 달아주는 데 반해, 미지원 브라우저에서는 바로 이미지를 로드해주기 위함입니다.</p>\n<h3 id=\"4-요소-가시성-확인후-unobserve\" style=\"position:relative;\"><a href=\"#4-%EC%9A%94%EC%86%8C-%EA%B0%80%EC%8B%9C%EC%84%B1-%ED%99%95%EC%9D%B8%ED%9B%84-unobserve\" aria-label=\"4 요소 가시성 확인후 unobserve permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 요소 가시성 확인후 unobserve</h3>\n<p>5번과 유사하게 이미지 태그에 src를 할당해주면 더이상 그 엘레멘트를 관찰할 필요가 없어집니다. 그러므로</p>\n<p>getImage로 이미지를 로드해준후, 해당 엘레멘트에 대한 관찰을 중지하도록 unobserve시켜줄 필요가 있습니다.</p>\n<h3 id=\"5-인스턴스-반환\" style=\"position:relative;\"><a href=\"#5-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%B0%98%ED%99%98\" aria-label=\"5 인스턴스 반환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 인스턴스 반환</h3>\n<p>인스턴스를 반환하는 이유는 우리가 불필요하게 요소를 계속 관찰하면 메모리에 좋지 못하기 때문에 인스턴스를 반환해서 컴포넌트가 언마운트되었을 때, 관찰을 중지시키기 위함입니다. 아래와 같이 사용하면 이미 사라진 컴포넌트 엘레멘트들에 대한 관찰을 중지해주기 때문에 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getImageObserver</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> observer<span class=\"token operator\">:</span> IntersectionObserver <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span>  <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    observer <span class=\"token operator\">=</span> <span class=\"token function\">useImageLazy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[data-src]'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">onBeforeMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>observer<span class=\"token punctuation\">)</span> observer<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 관찰하고 있는 모든 요소 관찰 끊기</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span><span class=\"token punctuation\">.</span>\n<span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getImageObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>이번글은 hook을 활용하여 이미지 레이지 로딩 함수를 만들어보았습니다. 이 함수는 static한 페이지에 활용하면 좋을거 같습니다. 왜냐하면 배열에 아이템이 더 추가되어 이미지도 추가된다면 다시 관찰 대상으로 새로 추가된 엘레멘트들을 등록해줘야하기 때문에 다소 번거로울 거 같습니다. 하지만 이 함수 형태를 잘 활용한다면, css 애니메이션을 위한 클래스를 동적으로 달아준다던지 하는 함수로 충분히 응용이 가능하기 한번 활용해보셔도 좋을거 같습니다.</p>","frontmatter":{"date":"September 21, 2021","title":"vue 3에서 이미지 레이지 로딩 함수 활용하기","categories":"vue3","author":"찐코딩","emoji":"✒️"},"fields":{"slug":"/vue3/image-lazyloading-function/"}},"prev":{"id":"173b959c-a720-5adb-ab79-358dd8a508b2","html":"<h2 id=\"️-내-소개--블로그-소개\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EB%82%B4-%EC%86%8C%EA%B0%9C--%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%86%8C%EA%B0%9C\" aria-label=\"️ 내 소개  블로그 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🙋‍♂️ 내 소개 + 블로그 소개</h2>\n<h3 id=\"개발-블로그-시작-이유\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%8B%9C%EC%9E%91-%EC%9D%B4%EC%9C%A0\" aria-label=\"개발 블로그 시작 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개발 블로그 시작 이유</h3>\n<p><strong>지식공유를 위해서</strong></p>\n<p>구글링 하면서 자료를 찾는 와중에 여러 개발블로그들을 들리게 되었고, 저도 제가 알게된게 유용할 때 알리고 싶다는 생각이 커졌습니다. 그래서 새롭게 알게된 내용을 조금씩 정리해보려고 합니다.</p>\n<p><strong>잊어버리지 않기 위해서</strong></p>\n<p>머릿 속 지식이 영원할거 같지만 그렇지 않았습니다. 예전에는 정말 상세히 공부했던 부분도 잊어버리곤했습니다. 그리고, 정리하지 않은 부분들이 머리속에서 뒤섞여있는 느낌이였습니다.</p>\n<p>하지만, 회사에서 개발 문서를 작성했던 경험으로 점점 지식들이 정리되고, 잊어버리지 않게 된다는 것을 알게되어서 저도 제 개인 블로그를 갖고 싶다는 생각이 들었습니다.</p>\n<p><strong>아직은..</strong></p>\n<p>비록 아직 글 수가 많지 않지만, 일주일에 하나정도는 작성해볼 생각입니다. 😆</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EB%82%B4-%EC%86%8C%EA%B0%9C--%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%86%8C%EA%B0%9C\">🙋‍♂️ 내 소개 + 블로그 소개</a></p>\n<ul>\n<li><a href=\"#%EA%B0%9C%EB%B0%9C-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%8B%9C%EC%9E%91-%EC%9D%B4%EC%9C%A0\">개발 블로그 시작 이유</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 26, 2021","title":"왜 개발 블로그를 하시나요?","categories":"블로그","author":"찐코딩","emoji":"✒️"},"fields":{"slug":"/why-blog/"}},"site":{"siteMetadata":{"siteUrl":"https://sujinlim0101.github.io","comments":{"utterances":{"repo":"sujinlim0101/sujinlim0101.github.io"}}}}},"pageContext":{"slug":"/vue3/vee-validate-yup/","nextSlug":"/vue3/image-lazyloading-function/","prevSlug":"/why-blog/"}},"staticQueryHashes":["1073350324","2938748437"]}